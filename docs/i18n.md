# Internationalization (i18n) Implementation

This document describes the internationalization system implemented for the Mortgage Amortization Calculator.

## Overview

The application now supports multiple languages with a complete i18n system that allows users to switch between English and French.

## Features

- **Language Switching**: Users can switch between English and French using the language selector in the header
- **Persistent Language Preference**: The selected language is saved in localStorage
- **Complete Translation Coverage**: All user-facing strings are translated
- **Dynamic Content Translation**: Dynamically generated content (tables, forms) is also translated
- **Parameterized Messages**: Support for dynamic content in messages (e.g., simulation names)

## File Structure

```
src/
├── i18n/
│   ├── index.js          # i18n utility functions
│   ├── en.json           # English translations
│   └── fr.json           # French translations
└── pages/
    └── index.astro       # Main page with i18n attributes
```

## Translation Files

### English (en.json)
Contains all English translations organized by sections:
- `app`: Application title and description
- `simulation`: Simulation management interface
- `mortgage`: Mortgage details form
- `amortization`: Amortization payments
- `periodic`: Periodic payments
- `service`: Service payments
- `schedule`: Amortization schedule display
- `messages`: Alert and confirmation messages
- `common`: Common UI elements

### French (fr.json)
Contains corresponding French translations with the same structure.

## Implementation Details

### HTML Integration
- All translatable elements use `data-i18n` attributes
- Placeholder text for inputs uses `data-i18n` attributes
- Language selector in the header allows switching

### JavaScript Integration
- Dynamic content creation includes i18n attributes
- Alert messages use the `window.i18n.t()` function
- Parameterized messages support dynamic content
- Automatic translation updates when language changes

### Key Functions

#### `window.i18n.t(key, params)`
Translates a key with optional parameters for dynamic content.

```javascript
// Simple translation
window.i18n.t('app.title')

// Parameterized translation
window.i18n.t('messages.simulationSaved', { name: 'My Simulation' })
```

#### `window.i18n.changeLanguage(lang)`
Changes the current language and updates all translations.

#### `window.i18n.updateTranslations()`
Updates all elements with `data-i18n` attributes.

## Usage

### Adding New Translations

1. Add the new key to both `en.json` and `fr.json`
2. Use the key in HTML with `data-i18n="key.path"`
3. Use the key in JavaScript with `window.i18n.t('key.path')`

### Adding New Languages

1. Create a new JSON file in `src/i18n/` (e.g., `es.json` for Spanish)
2. Add the language option to the language selector in `index.astro`
3. Update the `getAvailableLanguages()` function in `i18n/index.js`

## Technical Details

- Translations are loaded asynchronously
- Fallback to English if a language fails to load
- Language preference is stored in localStorage
- HTML lang attribute is updated dynamically
- All dynamic content triggers translation updates

## Browser Support

- Modern browsers with ES6+ support
- localStorage support required for language persistence
- Fetch API support required for loading translation files
